/********************************************************************
 *	Kalendae, a framework agnostic javascript date picker           *
 *	Copyright(c) 2013-2017 Jocelyn Badgley (joc@twipped.com)        *
 *	http://github.com/Twipped/Kalendae                              *
 *	Version 0.7.1                                                   *
 ********************************************************************/
!function(e){"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof exports?module.exports=e(require("moment")):window.Kalendae=e()}(function(e){var t=function(){return a.moment().startOf("day").yearDay()},a=function(t,a){if("function"==typeof document.addEventListener||n.isIE8()){var r=!1;try{r=t instanceof Element}catch(e){r=!!t&&1===r.nodeType}r||"string"==typeof t||(a=t);var o,d,l,u,h,c,f,m,y,v=this,p=v.classes,g=v.settings=n.merge(v.defaults,{attachTo:t},a||{}),b=v.container=n.make("div",{class:p.container}),w=v.calendars=[],k=e().day(g.weekStart),S=[],N=[],D=0,M=g.months;for(n.isIE8()&&n.addClassName(b,"ie8"),D=7;D--;)S.push(k.format(g.columnHeaderFormat)),k.add(1,"days");if(i(v),"object"==typeof g.subscribe)for(D in g.subscribe)g.subscribe.hasOwnProperty(D)&&v.subscribe(D,g.subscribe[D]);o=g.viewStartDate?e(g.viewStartDate,g.format):e(),v.viewStartDate=o.date(1),g.endDate&&(d=e(g.endDate,g.format),v.endDate=d),v._sel=[],g.selected&&(v.setSelected(g.selected,!1),v.viewStartDate=e(v._sel[0]));var x={past:g.months-1,"today-past":g.months-1,any:g.months>2?Math.floor(g.months/2):0,"today-future":0,future:0}[this.settings.direction];if(x&&e().month()==e(v.viewStartDate).month()&&(v.viewStartDate=e(v.viewStartDate).subtract({M:x}).date(1)),v.defaultView=e(v.viewStartDate),"function"==typeof g.blackout)v.blackout=g.blackout;else if(g.blackout){var C=s(g.blackout,g.parseSplitDelimiter,g.format);v.blackout=function(t){if((t=e(t).startOf("day").yearDay())<1||!v._sel)return!1;for(var a=C.length;a--;)if(C[a].startOf("day").yearDay()===t)return!0;return!1}}else v.blackout=function(){return!1};for(v.direction=v.directions[g.direction]?v.directions[g.direction]:v.directions.any,M=Math.max(g.months,1);M--;){(l=n.make("div",{class:p.calendar},b)).setAttribute("data-cal-index",M),g.months>1&&(M==Math.max(g.months-1,1)?n.addClassName(l,p.monthFirst):0===M?n.addClassName(l,p.monthLast):n.addClassName(l,p.monthMiddle)),u=n.make("div",{class:p.title},l),g.useYearNav||n.addClassName(u,p.disableYearNav),n.make("a",{class:p.previousYear},u),n.make("a",{class:p.previousMonth},u),n.make("a",{class:p.nextYear},u),n.make("a",{class:p.nextMonth},u),h=n.make("div",{class:p.caption},u),n.make("div",{class:p.captionMonth},h),n.make("div",{class:p.captionYear},h),c=n.make("div",{class:p.header+" "+(1==g.dayHeaderClickable?p.dayActive:"")},l),D=0;do{y=n.make("span",{"data-day":D},c),1==g.dayHeaderClickable&&"multiple"==g.mode&&(y.addEventListener("mouseover",function(e){var t=e.target.parentNode.nextSibling;if(daysToHover=t.getElementsByClassName("k-day-week-"+e.target.getAttribute("data-day")),daysToHover.length>0)for(var a=0;a<daysToHover.length;a++)n.hasClassName(daysToHover[a],p.dayActive)&&n.addClassName(daysToHover[a],"k-day-hover-active")}),y.addEventListener("mouseleave",function(e){var t=e.target.parentNode.nextSibling;if(daysToHover=t.getElementsByClassName("k-day-week-"+e.target.getAttribute("data-day")),daysToHover.length>0)for(var a=0;a<daysToHover.length;a++)n.hasClassName(daysToHover[a],p.dayActive)&&n.removeClassName(daysToHover[a],"k-day-hover-active")})),y.innerHTML=S[D]}while(++D<7);f=n.make("div",{class:p.days},l),D=0,N=[];do{"week"==g.mode?(D%7==0&&(m=n.make("div",{class:p.week+" clearfix"},f),N.push(m)),n.make("span",{},m)):N.push(n.make("span",{},f))}while(++D<42);w.push({header:c,caption:h,days:N}),M&&n.make("div",{class:p.monthSeparator},b)}v.draw(),n.addEvent(b,"mousedown",function(t,a){var s;if(n.hasClassName(a,p.nextMonth))return v.disableNextMonth||!1===v.publish("view-changed",v,["next-month"])||(v.viewStartDate.add(1,"months"),v.draw()),!1;if(n.hasClassName(a,p.previousMonth))return v.disablePreviousMonth||!1===v.publish("view-changed",v,["previous-month"])||(v.viewStartDate.subtract(1,"months"),v.draw()),!1;if(n.hasClassName(a,p.nextYear))return v.disableNextYear||!1===v.publish("view-changed",v,["next-year"])||(v.viewStartDate.add(1,"years"),v.draw()),!1;if(n.hasClassName(a,p.previousYear))return v.disablePreviousMonth||!1===v.publish("view-changed",v,["previous-year"])||(v.viewStartDate.subtract(1,"years"),v.draw()),!1;if((n.hasClassName(a.parentNode,p.days)||n.hasClassName(a.parentNode,p.week))&&n.hasClassName(a,p.dayActive)&&(s=a.getAttribute("data-date"))){if(s=e(s,g.dayAttributeFormat).hours(12),!1!==v.publish("date-clicked",v,[s]))switch(g.mode){case"multiple":v.addSelected(s)||v.removeSelected(s);break;case"range":v.addSelected(s);break;case"week":v.weekSelected(s);break;case"single":default:v.addSelected(s)}return!1}if(n.hasClassName(a.parentNode,p.week)&&(s=a.getAttribute("data-date")))return s=e(s,g.dayAttributeFormat).hours(12),!1!==v.publish("date-clicked",v,[s])&&"week"==g.mode&&v.weekSelected(s),!1;if(n.hasClassName(a.parentNode,p.header)){if("multiple"==g.mode&&1==g.dayHeaderClickable){var i=n.hasClassName(a,p.daySelected),r=a.parentNode.parentNode.getAttribute("data-datestart"),o=a.getAttribute("data-day");1==i?v.monthDaySelected(r,o,!0):v.monthDaySelected(r,o,!1)}return!1}return!1}),(g.attachTo=n.$(g.attachTo))&&g.attachTo.appendChild(b)}};a.prototype={defaults:{attachTo:null,months:1,weekStart:0,direction:"any",directionScrolling:!0,viewStartDate:null,endDate:null,blackout:null,selected:null,mode:"single",dayOutOfMonthClickable:!1,dayHeaderClickable:!1,format:null,subscribe:null,columnHeaderFormat:"dd",titleMonthFormat:"MMMM,",titleYearFormat:"YYYY",dayNumberFormat:"D",dayAttributeFormat:"YYYY-MM-DD",parseSplitDelimiter:/,\s*|\s+-\s+/,rangeDelimiter:" - ",multipleDelimiter:", ",useYearNav:!0,dateClassMap:{}},classes:{container:"kalendae",calendar:"k-calendar",monthFirst:"k-first-month",monthMiddle:"k-middle-month",monthLast:"k-last-month",title:"k-title",previousMonth:"k-btn-previous-month",nextMonth:"k-btn-next-month",previousYear:"k-btn-previous-year",nextYear:"k-btn-next-year",caption:"k-caption",captionMonth:"k-caption-month",captionYear:"k-caption-year",header:"k-header",days:"k-days",week:"k-week",dayOutOfMonth:"k-out-of-month",dayInMonth:"k-in-month",dayActive:"k-active",daySelected:"k-selected",dayInRange:"k-range",dayInRangeStart:"k-range-start",dayInRangeEnd:"k-range-end",dayBlackout:"k-blackout",dayToday:"k-today",monthSeparator:"k-separator",disablePreviousMonth:"k-disable-previous-month-btn",disableNextMonth:"k-disable-next-month-btn",disablePreviousYear:"k-disable-previous-year-btn",disableNextYear:"k-disable-next-year-btn",disableYearNav:"k-disable-year-nav"},disablePreviousMonth:!1,disableNextMonth:!1,disablePreviousYear:!1,disableNextYear:!1,directions:{past:function(a){return e(a).startOf("day").yearDay()>=t()},"today-past":function(a){return e(a).startOf("day").yearDay()>t()},any:function(e){return!1},"today-future":function(a){return e(a).startOf("day").yearDay()<t()},future:function(a){return e(a).startOf("day").yearDay()<=t()}},getSelectedAsDates:function(){for(var e=[],t=0,a=this._sel.length;t<a;t++)e.push(this._sel[t].toDate());return e},getSelectedAsText:function(e){for(var t=[],a=0,s=this._sel.length;a<s;a++)t.push(this._sel[a].format(e||this.settings.format||"YYYY-MM-DD"));return t},getSelectedRaw:function(){for(var t=[],a=0,s=this._sel.length;a<s;a++)t.push(e(this._sel[a]));return t},getSelected:function(e){var t=this.getSelectedAsText(e);switch(this.settings.mode){case"week":case"range":return t.splice(2),t.join(this.settings.rangeDelimiter);case"multiple":return t.join(this.settings.multipleDelimiter);case"single":default:return t[0]||null}},isSelected:function(t){if((t=e(t).startOf("day").yearDay())<1||!this._sel||this._sel.length<1)return!1;switch(this.settings.mode){case"week":case"range":var a=this._sel[0]?this._sel[0].startOf("day").yearDay():0,s=this._sel[1]?this._sel[1].startOf("day").yearDay():0;return a===t||s===t?1:a&&s?(t>a&&t<s||a<s&&t<a&&t>s)&&-1:0;case"multiple":for(var n=this._sel.length;n--;)if(this._sel[n].startOf("day").yearDay()===t)return!0;return!1;case"single":default:return this._sel[0]&&this._sel[0].startOf("day").yearDay()===t}return!1},setSelected:function(t,a){var n,i=s(t,this.settings.parseSplitDelimiter,this.settings.format),r=s(this.getSelected(),this.settings.parseSplitDelimiter,this.settings.format);for(n=r.length;n--;)this.removeSelected(r[n],!1);for(n=i.length;n--;)this.addSelected(i[n],!1);!1!==a&&(i[0]&&(this.viewStartDate=e(i[0],this.settings.format)),this.draw())},addSelected:function(t,a){if(t=e(t,this.settings.format).hours(12),this.endDate&&t.isAfter(this.endDate,"day"))return!1;switch(this.settings.dayOutOfMonthClickable&&"range"!==this.settings.mode&&this.makeSelectedDateVisible(t),this.settings.mode){case"multiple":if(this.isSelected(t))return!1;this._sel.push(t);break;case"range":1!==this._sel.length?this._sel=[t]:t.startOf("day").yearDay()>this._sel[0].startOf("day").yearDay()?this._sel[1]=t:this._sel=[t,this._sel[0]];break;case"single":default:this._sel=[t]}return this._sel.sort(function(e,t){return e.startOf("day").yearDay()-t.startOf("day").yearDay()}),this.publish("change",this,[t]),!1!==a&&this.draw(),!0},weekSelected:function(t){var a=t.toDate(),s=e(a).startOf("week"),n=e(a).endOf("week").subtract(1,"day");this._sel=[s,n],this.publish("change",this,[t.day()]),this.draw()},monthDaySelected:function(t,a,s){var n=e(t).startOf("month").weekday(a),i=e(t).endOf("month");for(selected=[];n<=i;)n>=e(t).startOf("month")&&!this.direction(n)&&(s?this.removeSelected(e(n).hours(12)):this.addSelected(e(n).hours(12))),n.add(7,"d")},makeSelectedDateVisible:function(t){outOfViewMonth=e(t).date("1").diff(this.viewStartDate,"months"),outOfViewMonth<0?this.viewStartDate.subtract(1,"months"):outOfViewMonth>0&&outOfViewMonth>=this.settings.months&&this.viewStartDate.add(1,"months")},removeSelected:function(t,a){t=e(t,this.settings.format).hours(12);for(var s=this._sel.length;s--;)if(this._sel[s].startOf("day").yearDay()===t.startOf("day").yearDay())return this._sel.splice(s,1),this.publish("change",this,[t]),!1!==a&&this.draw(),!0;return!1},removeAllSelected:function(e){for(var t=this._sel.length;t--;)if(this.removeSelected(this._sel[t],!1),0===t)return!1!==e&&this.draw(),!0;return!1},draw:function(){var s,i,r,o,d,l,u,h,c,f,m=e(this.viewStartDate).startOf("month").add(12,"hours"),y=this.classes,v=0,p=0,g=0,b=this.settings;d=this.calendars.length;do{(s=e(m).date(1)).day(s.day()<this.settings.weekStart?this.settings.weekStart-7:this.settings.weekStart),(i=this.calendars[v]).header.parentNode.setAttribute("data-datestart",m.format(this.settings.dayAttributeFormat)),i.caption.querySelector(".k-caption-month").innerHTML=m.format(this.settings.titleMonthFormat),i.caption.querySelector(".k-caption-year").innerHTML=m.format(this.settings.titleYearFormat),p=0,l=0,g=0,h=[];for(var w=0;w<7;w++)n.removeClassName(i.header.children[w],y.daySelected),h[w]=0;do{"week"==b.mode?(p%7==0&&0!==p&&l++,r=i.days[l].childNodes[p%7]):r=i.days[p],o=[],(u=this.isSelected(s))&&o.push({"-1":y.dayInRange,1:y.daySelected,true:y.daySelected}[u]),"range"===b.mode&&(this._sel[0]&&this._sel[0].startOf("day").yearDay()===s.clone().startOf("day").yearDay()&&o.push(y.dayInRangeStart),this._sel[1]&&this._sel[1].startOf("day").yearDay()===s.clone().startOf("day").yearDay()&&o.push(y.dayInRangeEnd)),b.dayHeaderClickable&&"multiple"===b.mode&&(o.push("k-day-week-"+s.weekday()),1!=u&&1!=u||this.direction(s)||m.format("M")!=s.format("M")||(h[s.weekday()]=h[s.weekday()]+1)),s.month()!=m.month()?o.push(y.dayOutOfMonth):o.push(y.dayInMonth),(!(this.blackout(s)||this.direction(s)||this.endDate&&s.isAfter(this.endDate,"day")||s.month()!=m.month()&&!1===b.dayOutOfMonthClickable)||u>0)&&o.push(y.dayActive),this.blackout(s)&&o.push(y.dayBlackout),s.clone().startOf("day").yearDay()===t()&&o.push(y.dayToday),c=s.format(this.settings.dayAttributeFormat),b.dateClassMap[c]&&o.push(b.dateClassMap[c]),r.innerHTML=s.format(b.dayNumberFormat),r.className=o.join(" "),r.setAttribute("data-date",c),s.add(1,"days")}while(++p<42);if(w=0,h.length>0){do{if(h[w]>0){var k=a.moment(m).startOf("month").weekday(w),S=a.moment(m).startOf("month");endMonth=a.moment(m).endOf("month"),g=0;do{k>=S&&!this.direction(k)&&g++,k.add(7,"d")}while(k<=endMonth);g==h[w]?n.addClassName(i.header.children[w],y.daySelected):n.removeClassName(i.header.children[w],y.daySelected)}}while(++w<h.length);b.endDate&&m.isSame(this.endDate,"month")?(this.disableNextMonth=!0,this.disableNextYear=!0,n.addClassName(this.container,y.disableNextMonth),n.addClassName(this.container,y.disableNextYear)):(this.disableNextMonth=!1,this.disableNextYear=!1,n.removeClassName(this.container,y.disableNextMonth),n.removeClassName(this.container,y.disableNextYear))}m.add(1,"months")}while(++v<d);if(b.directionScrolling){var N=e().startOf("day").hours(12);f=m.diff(N,"months",!0),"today-past"===b.direction||"past"===b.direction?f<=0?(this.disableNextMonth=!1,n.removeClassName(this.container,y.disableNextMonth)):(this.disableNextMonth=!0,n.addClassName(this.container,y.disableNextMonth)):"today-future"!==b.direction&&"future"!==b.direction||(f>b.months?(this.disablePreviousMonth=!1,n.removeClassName(this.container,y.disablePreviousMonth)):(this.disablePreviousMonth=!0,n.addClassName(this.container,y.disablePreviousMonth))),"today-past"===b.direction||"past"===b.direction?f<=-11?(this.disableNextYear=!1,n.removeClassName(this.container,y.disableNextYear)):(this.disableNextYear=!0,n.addClassName(this.container,y.disableNextYear)):"today-future"!==b.direction&&"future"!==b.direction||(f>11+b.months?(this.disablePreviousYear=!1,n.removeClassName(this.container,y.disablePreviousYear)):(this.disablePreviousYear=!0,n.addClassName(this.container,y.disablePreviousYear)))}this.publish("draw-end",this)}};var s=function(t,a,s){var i=[];"string"==typeof t?t=t.split(a):n.isArray(t)||(t=[t]);var r,o=t.length,d=0;do{t[d]&&(r=e(t[d],s).hours(12)).isValid()&&i.push(r)}while(++d<o);return i};window.Kalendae=a;var n=a.util={isIE8:function(){return!(!/msie 8./i.test(navigator.appVersion)||/opera/i.test(navigator.userAgent)||!window.ActiveXObject||!XDomainRequest||window.msPerformance)},isTouchDevice:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},$:function(e){return"string"==typeof e?document.getElementById(e):e},$$:function(e){return document.querySelectorAll(e)},make:function(e,t,a){var s,n=document.createElement(e);if(t)for(s in t)t.hasOwnProperty(s)&&n.setAttribute(s,t[s]);return a&&a.appendChild(n),n},isVisible:function(e){return e.offsetWidth>0||e.offsetHeight>0},getStyle:function(e,t){var a,s;return e.currentStyle?a=e.currentStyle[t]:window.getComputedStyle&&(a=(s=window.getComputedStyle(e,null))?s[t]:""),a},domReady:function(e){var t=document.readyState;"complete"===t||"interactive"===t?e():setTimeout(function(){n.domReady(e)},9)},addEvent:function(e,t,a){var s=function(t){var s=(t=t||window.event).target||t.srcElement,n=a.apply(e,[t,s]);return!1===n&&(t.preventDefault?t.preventDefault():(t.returnValue=!1,t.cancelBubble=!0)),n};return e.attachEvent?e.attachEvent("on"+t,s):"mousedown"===t&&n.isTouchDevice()?e.addEventListener("touchstart",s,!1):e.addEventListener(t,s,!1),s},removeEvent:function(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener(t,a,!1)},fireEvent:function(e,t){if(document.createEvent){var a=document.createEvent("HTMLEvents");a.initEvent(t,!0,!0),e.dispatchEvent(a)}else document.createEventObject?e.fireEvent("on"+t):"function"==typeof e["on"+t]&&e["on"+t]()},hasClassName:function(e,t){if(!(e=n.$(e)))return!1;var a=e.className;return a.length>0&&(a==t||new RegExp("(^|\\s)"+t+"(\\s|$)").test(a))},addClassName:function(e,t){(e=n.$(e))&&(n.hasClassName(e,t)||(e.className+=(e.className?" ":"")+t))},removeClassName:function(e,t){(e=n.$(e))&&(e.className=n.trimString(e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ")))},isFixed:function(e){do{if("fixed"===n.getStyle(e,"position"))return!0}while(e=e.offsetParent);return!1},scrollContainer:function(e){do{var t=n.getStyle(e,"overflow");if("auto"===t||"scroll"===t)return e}while((e=e.parentNode)&&e!=window.document.body);return null},getPosition:function(e,t){var a=e.offsetLeft,s=e.offsetTop,n={};if(!t)for(;e=e.offsetParent;)a+=e.offsetLeft,s+=e.offsetTop;return n[0]=n.left=a,n[1]=n.top=s,n},getHeight:function(e){return e.offsetHeight||e.scrollHeight},getWidth:function(e){return e.offsetWidth||e.scrollWidth},trimString:function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")},merge:function(){for(var e=!0===arguments[0],t={},a=e?1:0;a<arguments.length;a++)!function(t,a){if("object"==typeof a){for(var s in a)a.hasOwnProperty(s)&&(e&&"object"==typeof t[s]&&"object"==typeof a[s]?_update(t[s],a[s]):t[s]=a[s])}}(t,arguments[a]);return t},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)}};"function"==typeof document.addEventListener&&a.util.domReady(function(){for(var e,t,s,i=n.$$(".auto-kal"),r=i.length;r--;)t=null==(s=(e=i[r]).getAttribute("data-kal"))||""==s?{}:new Function("return {"+s+"};")(),"INPUT"===e.tagName?new a.Input(e,t):new a(n.merge(t,{attachTo:e}))}),a.Input=function(t,i){if("function"==typeof document.addEventListener||n.isIE8()){var r,o,d=this.input=n.$(t),l=!1;if(!d||"INPUT"!==d.tagName)throw"First argument for Kalendae.Input must be an <input> element or a valid element id.";var u=this,h=u.classes,c=u.settings=n.merge(u.defaults,i);this._events={},c.attachTo=window.document.body,c.selected?r=!0:c.selected=d.value,a.call(u,c),c.closeButton&&(o=n.make("a",{class:h.closeButton},u.container),n.addEvent(o,"click",function(){d.blur()})),r&&(d.value=u.getSelected());var f=u.container,m=!1;f.style.display="none",n.addClassName(f,h.positioned),this._events.containerMouseDown=n.addEvent(f,"mousedown",function(e,t){m=!0}),this._events.documentMousedown=n.addEvent(window.document,"mousedown",function(e,t){m=!1}),this._events.inputFocus=n.addEvent(d,"focus",function(){l=!0,u.setSelected(this.value),l=!1,u.show()}),this._events.inputBlur=n.addEvent(d,"blur",function(){m&&n.isIE8()?(m=!1,d.focus()):u.hide()}),this._events.inputKeyup=n.addEvent(d,"keyup",function(t){l=!0;var a=s(this.value,u.settings.parseSplitDelimiter,u.settings.format);a&&a.length&&a[0]&&a[0].year()>1e3?u.setSelected(this.value):(u.setSelected("",null),u.viewStartDate=e(u.defaultView),u.draw()),l=!1});var y=n.scrollContainer(d);y&&n.addEvent(y,"scroll",function(e){d.blur()}),u.subscribe("change",function(){l||(d.value=u.getSelected(),n.fireEvent(d,"change"),c.closeOnSelection&&"single"===c.mode&&(d.blur(),u.hide()))})}},a.Input.prototype=n.merge(a.prototype,{defaults:n.merge(a.prototype.defaults,{format:"MM/DD/YYYY",side:"bottom",closeButton:!0,offsetLeft:0,offsetTop:0}),classes:n.merge(a.prototype.classes,{positioned:"k-floating",closeButton:"k-btn-close"}),show:function(){var e=this.container,t=e.style,a=this.input,s=n.getPosition(a),i=n.scrollContainer(a),r=i?i.scrollTop:0,o=i?i.scrollLeft:0,d=this.settings;switch(t.display="",d.side){case"left":t.left=s.left-n.getWidth(e)+d.offsetLeft-o+"px",t.top=s.top+d.offsetTop-r+"px";break;case"right":t.left=s.left+n.getWidth(a)-o+"px",t.top=s.top+d.offsetTop-r+"px";break;case"top":t.left=s.left+d.offsetLeft-o+"px",t.top=s.top-n.getHeight(e)+d.offsetTop-r+"px";break;case"bottom right":t.left=s.left-n.getWidth(e)+n.getWidth(a)+d.offsetLeft+"px",t.top=s.top+n.getHeight(a)+d.offsetTop-r+"px";break;case"bottom":default:t.left=s.left+d.offsetLeft-o+"px",t.top=s.top+n.getHeight(a)+d.offsetTop-r+"px"}t.position=n.isFixed(a)?"fixed":"absolute",this.publish("show",this)},hide:function(){this.container.style.display="none",this.publish("hide",this)},destroy:function(){var e=this.container,t=this.input;n.removeEvent(e,"mousedown",this._events.containerMousedown),n.removeEvent(window.document,"mousedown",this._events.documentMousedown),n.removeEvent(t,"focus",this._events.inputFocus),n.removeEvent(t,"blur",this._events.inputBlur),n.removeEvent(t,"keyup",this._events.inputKeyup),e.parentNode&&e.parentNode.removeChild(e)}});var i=function(e){e||(e=this);var t=e.c_||{};e.publish=function(e,a,s){for(var n,i=t[e],r=i?i.length:0;r--;)if("boolean"==typeof(n=i[r].apply(a,s||[])))return n},e.subscribe=function(e,a,s){return t[e]||(t[e]=[]),s?t[e].push(a):t[e].unshift(a),[e,a]},e.unsubscribe=function(e){for(var a=t[e[0]],s=e[1],n=a?a.length:0;n--;)a[n]===s&&a.splice(n,1)}};if(void 0!==e&&(a.moment=e),!a.moment){if(!window.moment)throw"Kalendae requires moment.js. You must use kalendae.standalone.js if moment is not available on the page.";a.moment=window.moment}return e=a.moment,e.fn.yearDay=function(e){var t=Math.floor(this._d/864e5);return void 0===e?t:this.add({d:e-t})},"undefined"==typeof jQuery||"function"!=typeof document.addEventListener&&!n.isIE8()||(jQuery.fn.kalendae=function(e){return this.each(function(t,s){"INPUT"===s.tagName?jQuery(s).data("kalendae",new a.Input(s,e)):jQuery(s).data("kalendae",new a(jQuery.extend({},{attachTo:s},e)))}),this}),a});
